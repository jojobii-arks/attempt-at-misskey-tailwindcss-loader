import compile from './compile';
import { readFileSync } from 'fs';
import JSON5 from 'json5';
import path from 'path';

import { expect, test } from 'vitest';

test('compile', () => {
  expect(compile).toBeDefined();

  const darkTheme = compile(
    JSON5.parse(
      readFileSync(
        path.join(__dirname, 'default', '_dark.json5'),
        'utf8'
      ).toString()
    )
  );

  expect(darkTheme).toMatchObject({
    accent: 'rgb(134, 179, 0)',
    accentDarken: 'rgb(96, 128, 0)',
    accentLighten: 'rgb(172, 230, 0)',
    accentedBg: 'rgba(134, 179, 0, 0.15)',
    focus: 'rgba(134, 179, 0, 0.3)',
    bg: 'rgb(0, 0, 0)',
    acrylicBg: 'rgba(0, 0, 0, 0.5)',
    fg: 'rgb(218, 218, 218)',
    fgTransparentWeak: 'rgba(218, 218, 218, 0.75)',
    fgTransparent: 'rgba(218, 218, 218, 0.5)',
    fgHighlighted: 'rgb(226, 226, 226)',
    fgOnAccent: 'rgb(255, 255, 255)',
    divider: 'rgba(255, 255, 255, 0.1)',
    indicator: 'rgb(134, 179, 0)',
    panel: 'rgb(8, 8, 8)',
    panelHighlight: 'rgb(15, 15, 15)',
    panelHeaderBg: 'rgb(15, 15, 15)',
    panelHeaderFg: 'rgb(218, 218, 218)',
    panelHeaderDivider: 'rgba(0, 0, 0, 0)',
    acrylicPanel: 'rgba(8, 8, 8, 0.5)',
    windowHeader: 'rgba(8, 8, 8, 0.85)',
    popup: 'rgb(15, 15, 15)',
    shadow: 'rgba(0, 0, 0, 0.3)',
    header: 'rgba(8, 8, 8, 0.7)',
    navBg: 'rgb(8, 8, 8)',
    navFg: 'rgb(218, 218, 218)',
    navHoverFg: 'rgb(255, 255, 255)',
    navActive: 'rgb(134, 179, 0)',
    navIndicator: 'rgb(134, 179, 0)',
    link: 'rgb(68, 164, 193)',
    hashtag: 'rgb(255, 145, 86)',
    mention: 'rgb(134, 179, 0)',
    mentionMe: 'rgb(134, 179, 0)',
    renote: 'rgb(34, 158, 130)',
    modalBg: 'rgba(0, 0, 0, 0.5)',
    scrollbarHandle: 'rgba(255, 255, 255, 0.2)',
    scrollbarHandleHover: 'rgba(255, 255, 255, 0.4)',
    dateLabelFg: 'rgb(218, 218, 218)',
    infoBg: 'rgb(37, 49, 66)',
    infoFg: 'rgb(255, 255, 255)',
    infoWarnBg: 'rgb(66, 50, 28)',
    infoWarnFg: 'rgb(255, 189, 62)',
    switchBg: 'rgba(255, 255, 255, 0.15)',
    cwBg: 'rgb(104, 115, 144)',
    cwFg: 'rgb(57, 63, 79)',
    cwHoverBg: 'rgb(112, 123, 151)',
    buttonBg: 'rgba(255, 255, 255, 0.05)',
    buttonHoverBg: 'rgba(255, 255, 255, 0.1)',
    buttonGradateA: 'rgb(134, 179, 0)',
    buttonGradateB: 'rgb(74, 179, 0)',
    switchOffBg: 'rgba(255, 255, 255, 0.1)',
    switchOffFg: 'rgba(218, 218, 218, 0.8)',
    switchOnBg: 'rgba(134, 179, 0, 0.15)',
    switchOnFg: 'rgb(134, 179, 0)',
    inputBorder: 'rgba(255, 255, 255, 0.1)',
    inputBorderHover: 'rgba(255, 255, 255, 0.2)',
    listItemHoverBg: 'rgba(255, 255, 255, 0.03)',
    driveFolderBg: 'rgba(134, 179, 0, 0.3)',
    wallpaperOverlay: 'rgba(0, 0, 0, 0.5)',
    badge: 'rgb(49, 177, 206)',
    messageBg: 'rgb(0, 0, 0)',
    success: 'rgb(134, 179, 0)',
    error: 'rgb(236, 65, 55)',
    warn: 'rgb(236, 182, 55)',
    codeString: 'rgb(255, 182, 117)',
    codeNumber: 'rgb(207, 255, 158)',
    codeBoolean: 'rgb(197, 158, 255)',
    deckDivider: 'rgb(0, 0, 0)',
    htmlThemeColor: 'rgb(0, 0, 0)',
    X2: 'rgb(3, 3, 3)',
    X3: 'rgba(255, 255, 255, 0.05)',
    X4: 'rgba(255, 255, 255, 0.1)',
    X5: 'rgba(255, 255, 255, 0.05)',
    X6: 'rgba(255, 255, 255, 0.15)',
    X7: 'rgba(255, 255, 255, 0.05)',
    X8: 'rgb(153, 204, 0)',
    X9: 'rgb(115, 153, 0)',
    X10: 'rgba(134, 179, 0, 0.4)',
    X11: 'rgba(0, 0, 0, 0.3)',
    X12: 'rgba(255, 255, 255, 0.1)',
    X13: 'rgba(255, 255, 255, 0.15)',
    X14: 'rgba(8, 8, 8, 0.5)',
    X15: 'rgba(8, 8, 8, 0)',
    X16: 'rgba(8, 8, 8, 0.7)',
    X17: 'rgba(0, 0, 0, 0.8)',
  });

  const lightTheme = compile(
    JSON5.parse(
      readFileSync(
        path.join(__dirname, 'default', '_dark.json5'),
        'utf8'
      ).toString()
    )
  );

  expect(lightTheme).toMatchObject({
    accent: 'rgb(134, 179, 0)',
    accentDarken: 'rgb(96, 128, 0)',
    accentLighten: 'rgb(172, 230, 0)',
    accentedBg: 'rgba(134, 179, 0, 0.15)',
    focus: 'rgba(134, 179, 0, 0.3)',
    bg: 'rgb(0, 0, 0)',
    acrylicBg: 'rgba(0, 0, 0, 0.5)',
    fg: 'rgb(218, 218, 218)',
    fgTransparentWeak: 'rgba(218, 218, 218, 0.75)',
    fgTransparent: 'rgba(218, 218, 218, 0.5)',
    fgHighlighted: 'rgb(226, 226, 226)',
    fgOnAccent: 'rgb(255, 255, 255)',
    divider: 'rgba(255, 255, 255, 0.1)',
    indicator: 'rgb(134, 179, 0)',
    panel: 'rgb(8, 8, 8)',
    panelHighlight: 'rgb(15, 15, 15)',
    panelHeaderBg: 'rgb(15, 15, 15)',
    panelHeaderFg: 'rgb(218, 218, 218)',
    panelHeaderDivider: 'rgba(0, 0, 0, 0)',
    acrylicPanel: 'rgba(8, 8, 8, 0.5)',
    windowHeader: 'rgba(8, 8, 8, 0.85)',
    popup: 'rgb(15, 15, 15)',
    shadow: 'rgba(0, 0, 0, 0.3)',
    header: 'rgba(8, 8, 8, 0.7)',
    navBg: 'rgb(8, 8, 8)',
    navFg: 'rgb(218, 218, 218)',
    navHoverFg: 'rgb(255, 255, 255)',
    navActive: 'rgb(134, 179, 0)',
    navIndicator: 'rgb(134, 179, 0)',
    link: 'rgb(68, 164, 193)',
    hashtag: 'rgb(255, 145, 86)',
    mention: 'rgb(134, 179, 0)',
    mentionMe: 'rgb(134, 179, 0)',
    renote: 'rgb(34, 158, 130)',
    modalBg: 'rgba(0, 0, 0, 0.5)',
    scrollbarHandle: 'rgba(255, 255, 255, 0.2)',
    scrollbarHandleHover: 'rgba(255, 255, 255, 0.4)',
    dateLabelFg: 'rgb(218, 218, 218)',
    infoBg: 'rgb(37, 49, 66)',
    infoFg: 'rgb(255, 255, 255)',
    infoWarnBg: 'rgb(66, 50, 28)',
    infoWarnFg: 'rgb(255, 189, 62)',
    switchBg: 'rgba(255, 255, 255, 0.15)',
    cwBg: 'rgb(104, 115, 144)',
    cwFg: 'rgb(57, 63, 79)',
    cwHoverBg: 'rgb(112, 123, 151)',
    buttonBg: 'rgba(255, 255, 255, 0.05)',
    buttonHoverBg: 'rgba(255, 255, 255, 0.1)',
    buttonGradateA: 'rgb(134, 179, 0)',
    buttonGradateB: 'rgb(74, 179, 0)',
    switchOffBg: 'rgba(255, 255, 255, 0.1)',
    switchOffFg: 'rgba(218, 218, 218, 0.8)',
    switchOnBg: 'rgba(134, 179, 0, 0.15)',
    switchOnFg: 'rgb(134, 179, 0)',
    inputBorder: 'rgba(255, 255, 255, 0.1)',
    inputBorderHover: 'rgba(255, 255, 255, 0.2)',
    listItemHoverBg: 'rgba(255, 255, 255, 0.03)',
    driveFolderBg: 'rgba(134, 179, 0, 0.3)',
    wallpaperOverlay: 'rgba(0, 0, 0, 0.5)',
    badge: 'rgb(49, 177, 206)',
    messageBg: 'rgb(0, 0, 0)',
    success: 'rgb(134, 179, 0)',
    error: 'rgb(236, 65, 55)',
    warn: 'rgb(236, 182, 55)',
    codeString: 'rgb(255, 182, 117)',
    codeNumber: 'rgb(207, 255, 158)',
    codeBoolean: 'rgb(197, 158, 255)',
    deckDivider: 'rgb(0, 0, 0)',
    htmlThemeColor: 'rgb(0, 0, 0)',
    X2: 'rgb(3, 3, 3)',
    X3: 'rgba(255, 255, 255, 0.05)',
    X4: 'rgba(255, 255, 255, 0.1)',
    X5: 'rgba(255, 255, 255, 0.05)',
    X6: 'rgba(255, 255, 255, 0.15)',
    X7: 'rgba(255, 255, 255, 0.05)',
    X8: 'rgb(153, 204, 0)',
    X9: 'rgb(115, 153, 0)',
    X10: 'rgba(134, 179, 0, 0.4)',
    X11: 'rgba(0, 0, 0, 0.3)',
    X12: 'rgba(255, 255, 255, 0.1)',
    X13: 'rgba(255, 255, 255, 0.15)',
    X14: 'rgba(8, 8, 8, 0.5)',
    X15: 'rgba(8, 8, 8, 0)',
    X16: 'rgba(8, 8, 8, 0.7)',
    X17: 'rgba(0, 0, 0, 0.8)',
  });
});
